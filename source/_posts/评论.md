---
title: 评论
date: 2017-11-14 19:36:33
tags:
  - issues
categories:
  - other
---

### 由来

[gitment](https://github.com/imsun/gitment)使用 **github issue** 保存评论

### 准备

右键新标签页打开 https://github.com/settings/applications/new

创建
![app-id](http://ojtd6k176.bkt.clouddn.com/github-new-app.png)

获取 id secret
![参数](http://ojtd6k176.bkt.clouddn.com/github-app-id.png)

### hexo Theme

根据 *个人主题* 添加

#### 样式

source/css/gitment.css

- css [详情右键新标签页](https://github.com/chengshea/record/blob/master/issue/gitment.css)

source/js/gitment.js

- js [详情右键新标签页](https://github.com/chengshea/record/blob/master/issue/gitment.js)

#### 布局调用
 <!--more--> 
调用认证
/layout/_partial/comments/gitment.ejs

```
<div id="gitment"></div>
<!-- 主页不要加载gitment -->
<%if (!index){ %>
<script>
var gitment = new Gitment({
owner: 'chengshea',
repo: 'chengshea.github.io',
oauth: {
client_id: '3478952f5e3ade06xxxxx',
client_secret: '3ca8b3ada58c7993cbb385839f83ba8xxxxxx',
 },
})
gitment.render('gitment')
</script>
<% } %>
```



添加评论
/layout/_partial/article.ejs

```
<% if (!index && post.comments){ %>
    <%  if (theme.gitment.on) { %>
        <%- partial('comments/gitment') %>
    <% } else if (theme.disqus.on) { %>
        <%- partial('comments/disqus', {
            shortname: theme.disqus.shortname
          }) %>
    <% } else if (config.disqus_shortname) { %>
        <%- partial('comments/disqus', {
            shortname: config.disqus_shortname
          }) %>
    <% } %>
<% } %>
```



**_config.yml** 配置添加gitment开启

```
gitment:
       on: true
       enable: true
       owner: chengshea
       repo: chengshea.github.io
       client_id: 3478952f5e3adexxxxx
       client_secret: 3ca8b3ada58c7993cbb385839f83bxxxxx
```
<%- js('js/require-2.1.6') %>
<%- js('js/jquery-1.9.1.min') %>
<% if (page.mathjax){ %>
<%- partial('mathjax') %>
<% } %>
<%- js('js/main') %>
<%- js('js/busuanzi.pure.mini') %>
<%- js('js/search') %>
<%- partial('background') %>
<%- partial('analytics/google-analytics') %>
<%- partial('analytics/baidu-analytics') %>

<%- partial('scrolling-button') %>
<%- partial('hide-labels') %>

<% if (theme.TipTitle){ %>
  <%- partial('post/TipTitle') %>
<% } %>

<!--搜索--->
<% if (theme.search_box) { %>
   <script type="text/javascript">
    
	var inputArea       = document.querySelector("#local-search-input");
	inputArea.onclick   = function(){ getSearchFile(); this.onclick = null }
	inputArea.onkeydown = function(){ if(event.keyCode == 13) return false }
	var getSearchFile = function(){
	  searchFunc("<%= config.root %>" + "search.json", 'local-search-input', 'local-search-result',"<%= config.root %>");
	}
           
          $(document).on('click', function(e) {
		  var si= $(e.target).closest('#id_search').length;
               var d= $(e.target).closest('#local_search').length;

            //console.log(si+" "+" "+d)//si==0 && d==0
		if(si==1){ 
			document.body.style.overflow='hidden';
		}
                 // 关闭弹框
             if( si==0 && d==0){
 
               //  console.log('弹出框以外的部分被点击了');
                     
               document.body.style.overflow=''
               $('#local_search').hide();
                  }
            

       });


  </script>
<% } %>